<!DOCTYPE html>

<html lang="en">
<head>
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css">
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.4.1/jquery.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.7/umd/popper.min.js"></script>
    <script src="https://maxcdn.bootstrapcdn.com/bootstrap/4.3.1/js/bootstrap.min.js"></script>
    <meta charset="utf-8" />
    <title>Bowen's Improved Web Portfolio</title>
    <link rel="stylesheet" href="improvedStyles.css" />
</head>
<body>
    <div class="background">
        <div class="animContainer">
            <div class="move treelineLeft">
                <img id="left" src="treesInner.png" style="margin-top: -15vh" alt="Moving trees">
            </div>
            <p id="yeet"></p>
        </div>

        <div class="animContainer animRight">
            <div class="move treelineRight">
                <img id="right" src="trees.png" style="margin-top: -2.5vh" alt="Moving trees">
            </div>
        </div>

        <div class="animContainer animLeft">
            <div class="move treelineLeftFast">
                <img id="left2" src="treesOut.png" style="margin-top: 10vh;" alt="Moving trees">
            </div>
        </div>

        <script>
            var height = window.innerHeight;
            var width = window.innerWidth;
            var treelineLeft = document.getElementsByClassName('move')[0];
            var treelineRight = document.getElementsByClassName('move')[1];
            var treelineLeftFast = document.getElementsByClassName('move')[2];
            var treeOpacity = 1;
            window.addEventListener('scroll', function () {
                var scrollTop = window.pageYOffset || window.scrollTop;
                var scrollPercent = scrollTop / height || 0;
                treeOpacity = 1 - scrollPercent * scrollPercent * 1.2;

                document.getElementById('yeet').innerHTML = scrollPercent;
                treelineLeft.style.top = scrollPercent * height / 2 + 'px';
                treelineLeft.style.left = 0 - (scrollPercent * width) + 'px';
                treelineRight.style.top = scrollPercent * height / 2 + 'px';
                treelineRight.style.left = width - document.getElementById('right').width + (scrollPercent * width) * 1.5 + 'px';
                treelineLeftFast.style.top = scrollPercent * height / 3 + 'px';
                treelineLeftFast.style.left = 0 - (scrollPercent * width) * 2 + 'px';
                treelineLeft.style.opacity = treeOpacity;
                treelineRight.style.opacity = treeOpacity;
                treelineLeftFast.style.opacity = treeOpacity;
                document.getElementsByClassName('meContainer')[0].style.opacity = treeOpacity;
            });
        </script>

        <div class="aboutMe">
            <div class="meContainer">
                <div class="pfp"><img src="face.jpg" style="max-width: 100%; max-height: 100%;" class="rounded" alt="My Profile Picture"></div>
                <div class="headerText">Bowen Luo</div>
                <div class="subText">Web Portfolio</div>
            </div>
        </div>

        <div class="headerContainer" id="stickyHead">
            <div class="header">
                <div class="home">
                    <a href="#" class="btn">Home</a>
                </div>
                <div class="rightOfContainer">
                    <div class="projects">
                        <a href="#car" class="btn">Projects</a>
                    </div>
                    <div class="resume">
                        <a href="#" class="btn">Resume</a>
                    </div>
                </div>
            </div>
        </div>

        <script>
            var flexHeader = document.getElementById('stickyHead');
            var atTop = true;
            var pastIntro = false;
            var height = window.innerHeight;
            var opacity = 0.8;
            var fromTop = true;
            var inUse = false;
            window.addEventListener('scroll', function () {
                var scrollTop = window.pageYOffset || window.scrollTop;
                var scrollPercent = scrollTop / height || 0;
                if (scrollPercent > 0) {
                    atTop = false;
                }
                else {
                    atTop = true;
                }
                if (scrollPercent >= 2) {
                    pastIntro = true;
                }
                else {
                    pastIntro = false;
                }
                if (atTop && !inUse) {
                    inUse = true;
                    var glow = setInterval(function () {
                        flexHeader.style.top = '90vh';
                        if (opacity > 0.8) {
                            inUse = false;
                            fromTop = true;
                            clearInterval(glow);
                        }
                        else {
                            opacity += 0.02;
                            flexHeader.style.opacity = opacity;
                        }
                    }, 10)
                }
                else if (!atTop && !pastIntro && opacity > 0 && !inUse) {
                    inUse = true;
                    if (fromTop) {
                        flexHeader.style.top = '90vh';
                    }
                    var fade = setInterval(function () {
                        if (opacity < 0) {
                            opacity = 0;
                            inUse = false;
                            clearInterval(fade);
                        }
                        else {
                            opacity -= 0.02;
                            flexHeader.style.opacity = opacity;
                        }
                    }, 10)
                }
                else if (pastIntro && !inUse) {
                    inUse = true;
                    flexHeader.style.top = '0vh';
                    var glow = setInterval(function () {
                        if (opacity > 0.8) {
                            inUse = false;
                            fromTop = false;
                            clearInterval(glow);
                        }
                        else {
                            opacity += 0.02;
                            flexHeader.style.opacity = opacity;
                        }
                    }, 10)
                }
            });
        </script>

        <div class="otherStuff">
            <div class="introContainer">
                <div class="introInfo">Hello there! Welcome to my work in progress web portfolio. Here, you will be able to find a few of my projects, my resumé, and whatever else I am currently testing out. Please have a look around!</div>
            </div>
        </div>

        <div class="carouselSect" id="car">
            <div class="projectContainer">
                <div class="project">
                    <div id="carousel" class="carousel slide" data-ride="carousel">
                        <ol class="carousel-indicators">
                            <li data-target="#carousel" data-slide-to="0" class="active"></li>
                            <li data-target="#carousel" data-slide-to="1"></li>
                        </ol>
                        <div class="carousel-inner">
                            <div class="carousel-item active">
                                <img src="red.jpg" style="width: 100%; height: 45vh;" alt="Intro">
                                <div class="carousel-caption d-none d-md-block">Wanted to play Flappy Bird but you're really bad? Me too! Instead watch this neural net learn to play for you... After sacrificing a couple thousand innocent birds.</div>
                            </div>
                            <div class="carousel-item">
                                <img src="flappy.gif" style="width: 100%; height: 45vh;" alt="First slide">
                            </div>
                        </div>
                        <a class="carousel-control-prev" href="#carousel" role="button" data-slide="prev">
                            <span class="carousel-control-prev-icon" aria-hidden="true"></span>
                            <span class="sr-only">Previous</span>
                        </a>
                        <a class="carousel-control-next" href="#carousel" role="button" data-slide="next">
                            <span class="carousel-control-next-icon" aria-hidden="true"></span>
                            <span class="sr-only">Next</span>
                        </a>
                    </div>
                </div>
                <div class="project">
                    <div id="carousel2" class="carousel slide" data-ride="carousel">
                        <ol class="carousel-indicators">
                            <li data-target="#carousel2" data-slide-to="0" class="active"></li>
                            <li data-target="#carousel2" data-slide-to="1"></li>
                        </ol>
                        <div class="carousel-inner">
                            <div class="carousel-item active">
                                <img src="orange.jpg" style="width: 100%; height: 45vh;" alt="Intro">
                                <div class="carousel-caption d-none d-md-block">Here lies my first web portfolio, may it rest in peace. I hope the current one is an improvement!</div>
                            </div>
                            <div class="carousel-item">
                                <img src="oldPortfolio.gif" style="width: 100%; height: 45vh;" alt="First slide">
                            </div>
                        </div>
                        <a class="carousel-control-prev" href="#carousel2" role="button" data-slide="prev">
                            <span class="carousel-control-prev-icon" aria-hidden="true"></span>
                            <span class="sr-only">Previous</span>
                        </a>
                        <a class="carousel-control-next" href="#carousel2" role="button" data-slide="next">
                            <span class="carousel-control-next-icon" aria-hidden="true"></span>
                            <span class="sr-only">Next</span>
                        </a>
                    </div>
                </div>
                <div class="project">
                    <div id="carousel3" class="carousel slide" data-ride="carousel">
                        <ol class="carousel-indicators">
                            <li data-target="#carousel3" data-slide-to="0" class="active"></li>
                            <li data-target="#carousel3" data-slide-to="1"></li>
                        </ol>
                        <div class="carousel-inner">
                            <div class="carousel-item active">
                                <img src="green.jpg" style="width: 100%; height: 45vh;" alt="Intro">
                                <div class="carousel-caption d-none d-md-block">Made from scratch in Python, a neural network consisting of one input and two sigmoid-activated layers that uses back-propagation to determine whether the input word is English or not. Click the button to learn more!</div>
                            </div>
                            <div class="carousel-item">
                                <img src="net.png" style="width: 100%; height: 45vh;" alt="First slide">
                            </div>
                        </div>
                        <a class="carousel-control-prev" href="#carousel3" role="button" data-slide="prev">
                            <span class="carousel-control-prev-icon" aria-hidden="true"></span>
                            <span class="sr-only">Previous</span>
                        </a>
                        <a class="carousel-control-next" href="#carousel3" role="button" data-slide="next">
                            <span class="carousel-control-next-icon" aria-hidden="true"></span>
                            <span class="sr-only">Next</span>
                        </a>
                    </div>
                </div>
            </div>
        </div>
    </div>
    <script>
        var height = window.innerHeight;
        window.addEventListener('scroll', function () {
            var scrollTop = window.pageYOffset || window.scrollTop;
            var scrollPercent = scrollTop / height || 0;
            document.getElementsByClassName("background")[0].style.backgroundPosition = 100 - (scrollPercent / 2) * 100 + '% 0%';
            document.getElementsByClassName("otherStuff")[0].style.backgroundPosition = 100 - (scrollPercent / 2) * 100 + '% 0%';
        });
    </script>
</body>
</html>